<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>대시보드</title>
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="/css/dashboard.css">
  <script src="/js/logout-timer.js" defer></script>
  <script src="/js/calendar.js" defer></script>
  <script src="/js/dashboard.js" defer></script>
</head>
<body>

<div class="dashboard-wrapper">
  <div th:replace="~{fragments/sidebar :: sidebar}"></div>
  <div th:replace="~{fragments/topbar :: topbar}"></div>
  <div th:replace="~{fragments/calendar :: calendar}"></div>

  <div class="main-content">
    <div class="dashboard-container">

      <h1>관리 대시보드</h1>
      <div class="dashboard-top-row">
        <!-- 왼쪽: 일정 박스 -->
        <div class="upcoming-schedule-box">
          <h2>📅 다가오는 일정</h2>
          <ul class="upcoming-schedule-list" id="upcoming-list">
            <!-- JS에서 동적으로 삽입 -->
          </ul>
        </div>

        <!-- 오른쪽: 공지사항 + 투표 카드 -->
        <div class="right-info-column">
          <div class="notice-box">
            <h2>📢 공지사항</h2>
            <ul id="notice-list" class="notice-list">
              <!-- JS에서 동적 삽입 -->
            </ul>
          </div>

          <div class="poll-box">
            <h2>🗳 투표하기</h2>
            <div id="poll-question">로딩 중...</div>
            <form id="poll-form">
              <!-- JS에서 옵션 생성 -->
              <button type="submit">투표하기</button>
            </form>
          </div>
        </div>
      </div>

      <!-- 기존 카드 -->
      <div class="card-grid">
        <div class="card">
          <h2>프로젝트</h2>
          <p>🚧 진행중: <span th:text="${projectInProgress}">0</span></p>
          <p>✅ 완료됨: <span th:text="${projectCompleted}">0</span></p>
          <p>⏸ 보류중: <span th:text="${projectPending}">0</span></p>
        </div>

        <div class="card">
          <h2>IP 관리</h2>
          <p>🖧 추가된 대역: <span th:text="${ipRangeCount}">0</span></p>
          <p>🟢 활성 호스트: <span th:text="${ipUpCount}">0</span></p>
          <p>🔴 비활성 호스트: <span th:text="${ipDownCount}">0</span></p>
        </div>

        <div class="card">
          <h2>DNS 관리</h2>
          <p>🌐관리 중인 DNS 갯수: <span th:text="${dnsCount ?: 0}">0</span>개</p>
        </div>

        <div class="card">
          <h2>내부 서비스</h2>
          <p>🛠등록 된 서비스 :<span th:text="${internalServiceTotal ?: 0}">0</span>개</p>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
